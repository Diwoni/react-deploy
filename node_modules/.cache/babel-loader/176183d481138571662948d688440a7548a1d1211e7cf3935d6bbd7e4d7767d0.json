{"ast":null,"code":"var _jsxFileName = \"/Users/jiwon/Desktop/KaKaoTech/Step2/5\\u110C\\u116E\\u110E\\u1161 \\u1100\\u116A\\u110C\\u1166/week5/react-product-login/src/pages/MyAccount/index.tsx\",\n  _s = $RefreshSig$();\nimport styled from '@emotion/styled';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { Button } from '@/components/common/Button';\nimport { Spacing } from '@/components/common/layouts/Spacing';\nimport { useAuth } from '@/provider/Auth';\nimport { RouterPath } from '@/routes/path';\nimport { authSessionStorage } from '@/utils/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MyAccountPage = () => {\n  _s();\n  const authInfo = useAuth();\n  const [wishes, setWishes] = useState([]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const pageSize = 10;\n  const handleLogout = () => {\n    authSessionStorage.set(undefined);\n    const redirectURL = `${window.location.origin}${RouterPath.home}`;\n    window.location.replace(redirectURL);\n  };\n  const fetchWishes = async page => {\n    if (!authInfo) return; // authInfo가 없으면 반환\n    try {\n      const response = await axios.get(`/api/wishes?page=${page}&size=${pageSize}`, {\n        headers: {\n          Authorization: `Bearer ${authInfo.token}` // 로그인 토큰 추가\n        }\n      });\n      setWishes(response.data.content);\n      setTotalPages(response.data.totalPages);\n    } catch (error) {\n      console.error('Failed to fetch wishes', error);\n    }\n  };\n  useEffect(() => {\n    if (authInfo) {\n      fetchWishes(currentPage);\n    }\n  }, [authInfo, currentPage, fetchWishes]);\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [authInfo === null || authInfo === void 0 ? void 0 : authInfo.name, \"\\uB2D8 \\uC548\\uB155\\uD558\\uC138\\uC694! \", /*#__PURE__*/_jsxDEV(Spacing, {\n      height: 64\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 32\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      size: \"small\",\n      theme: \"darkGray\",\n      onClick: handleLogout,\n      style: {\n        maxWidth: '200px'\n      },\n      children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Spacing, {\n      height: 64\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uAD00\\uC2EC \\uBAA9\\uB85D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WishList, {\n      children: wishes.map(wish => /*#__PURE__*/_jsxDEV(WishListItem, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: wish.product.imageUrl,\n          alt: wish.product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: wish.product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [wish.product.price, \"\\uC6D0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, wish.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      children: Array.from({\n        length: totalPages\n      }, (_, index) => /*#__PURE__*/_jsxDEV(PageButton, {\n        onClick: () => setCurrentPage(index),\n        active: index === currentPage,\n        children: index + 1\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(MyAccountPage, \"cNmAFdb6MU+A79G1Zsa0OJ7i/BE=\", false, function () {\n  return [useAuth];\n});\n_c = MyAccountPage;\nconst Wrapper = styled.div`\n  width: 100%;\n  padding: 80px 0 120px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 36px;\n`;\n_c2 = Wrapper;\nconst WishList = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n`;\n_c3 = WishList;\nconst WishListItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 10px 0;\n\n  img {\n    width: 50px;\n    height: 50px;\n    margin-right: 10px;\n  }\n\n  h3 {\n    margin: 0;\n    font-size: 18px;\n  }\n\n  p {\n    margin: 0;\n    color: #888;\n  }\n`;\n_c4 = WishListItem;\nconst Pagination = styled.div`\n  margin-top: 20px;\n  display: flex;\n`;\n_c5 = Pagination;\nconst PageButton = styled.button`\n  margin: 0 5px;\n  padding: 5px 10px;\n  border: none;\n  background-color: ${({\n  active\n}) => active ? '#333' : '#f5f5f5'};\n  color: ${({\n  active\n}) => active ? '#fff' : '#000'};\n  cursor: pointer;\n\n  &:hover {\n    background-color: #ddd;\n  }\n`;\n_c6 = PageButton;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"MyAccountPage\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"WishList\");\n$RefreshReg$(_c4, \"WishListItem\");\n$RefreshReg$(_c5, \"Pagination\");\n$RefreshReg$(_c6, \"PageButton\");","map":{"version":3,"names":["styled","axios","useEffect","useState","Button","Spacing","useAuth","RouterPath","authSessionStorage","jsxDEV","_jsxDEV","MyAccountPage","_s","authInfo","wishes","setWishes","currentPage","setCurrentPage","totalPages","setTotalPages","pageSize","handleLogout","set","undefined","redirectURL","window","location","origin","home","replace","fetchWishes","page","response","get","headers","Authorization","token","data","content","error","console","Wrapper","children","name","height","fileName","_jsxFileName","lineNumber","columnNumber","size","theme","onClick","style","maxWidth","WishList","map","wish","WishListItem","src","product","imageUrl","alt","price","id","Pagination","Array","from","length","_","index","PageButton","active","_c","div","_c2","_c3","_c4","_c5","button","_c6","$RefreshReg$"],"sources":["/Users/jiwon/Desktop/KaKaoTech/Step2/5주차 과제/week5/react-product-login/src/pages/MyAccount/index.tsx"],"sourcesContent":["import styled from '@emotion/styled';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\n\nimport { Button } from '@/components/common/Button';\nimport { Spacing } from '@/components/common/layouts/Spacing';\nimport { useAuth } from '@/provider/Auth';\nimport { RouterPath } from '@/routes/path';\nimport { authSessionStorage } from '@/utils/storage';\n\ninterface WishItem {\n  id: number;\n  product: {\n    id: number;\n    name: string;\n    price: number;\n    imageUrl: string;\n  };\n}\n\nexport const MyAccountPage = () => {\n  const authInfo = useAuth();\n  const [wishes, setWishes] = useState<WishItem[]>([]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const pageSize = 10;\n\n  const handleLogout = () => {\n    authSessionStorage.set(undefined);\n\n    const redirectURL = `${window.location.origin}${RouterPath.home}`;\n    window.location.replace(redirectURL);\n  };\n\n  const fetchWishes = async (page: number) => {\n    if (!authInfo) return; // authInfo가 없으면 반환\n    try {\n      const response = await axios.get(`/api/wishes?page=${page}&size=${pageSize}`, {\n        headers: {\n          Authorization: `Bearer ${authInfo.token}`, // 로그인 토큰 추가\n        },\n      });\n      setWishes(response.data.content);\n      setTotalPages(response.data.totalPages);\n    } catch (error) {\n      console.error('Failed to fetch wishes', error);\n    }\n  };\n\n  useEffect(() => {\n    if (authInfo) {\n      fetchWishes(currentPage);\n    }\n  }, [authInfo, currentPage, fetchWishes]);\n\n  return (\n    <Wrapper>\n      {authInfo?.name}님 안녕하세요! <Spacing height={64} />\n      <Button\n        size=\"small\"\n        theme=\"darkGray\"\n        onClick={handleLogout}\n        style={{\n          maxWidth: '200px',\n        }}\n      >\n        로그아웃\n      </Button>\n      <Spacing height={64} />\n      <h2>관심 목록</h2>\n      <WishList>\n        {wishes.map((wish) => (\n          <WishListItem key={wish.id}>\n            <img src={wish.product.imageUrl} alt={wish.product.name} />\n            <div>\n              <h3>{wish.product.name}</h3>\n              <p>{wish.product.price}원</p>\n            </div>\n          </WishListItem>\n        ))}\n      </WishList>\n      <Pagination>\n        {Array.from({ length: totalPages }, (_, index) => (\n          <PageButton\n            key={index}\n            onClick={() => setCurrentPage(index)}\n            active={index === currentPage}\n          >\n            {index + 1}\n          </PageButton>\n        ))}\n      </Pagination>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.div`\n  width: 100%;\n  padding: 80px 0 120px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 36px;\n`;\n\nconst WishList = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n`;\n\nconst WishListItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 10px 0;\n\n  img {\n    width: 50px;\n    height: 50px;\n    margin-right: 10px;\n  }\n\n  h3 {\n    margin: 0;\n    font-size: 18px;\n  }\n\n  p {\n    margin: 0;\n    color: #888;\n  }\n`;\n\nconst Pagination = styled.div`\n  margin-top: 20px;\n  display: flex;\n`;\n\nconst PageButton = styled.button<{ active?: boolean }>`\n  margin: 0 5px;\n  padding: 5px 10px;\n  border: none;\n  background-color: ${({ active }) => (active ? '#333' : '#f5f5f5')};\n  color: ${({ active }) => (active ? '#fff' : '#000')};\n  cursor: pointer;\n\n  &:hover {\n    background-color: #ddd;\n  }\n`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}